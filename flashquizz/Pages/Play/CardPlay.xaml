<ContentPage 
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="flashquizz.Pages.Play.CardPlay"
    xmlns:models="clr-namespace:flashquizz.Models"
    NavigationPage.HasNavigationBar="False">

    <Grid RowDefinitions="80,*">

        <!-- nav custom -->
        <Grid Grid.Row="0" HeightRequest="80">
            <BoxView Color="Black" />
            <Image Source="nav.png" Aspect="AspectFit" HeightRequest="80"/>

            <Label 
                TextColor="#FFD700"
                FontSize="24"
                FontAttributes="Bold"
                HorizontalOptions="Center"
                VerticalOptions="Center"/>

            <ImageButton
                Source="backarrow.png"
                HeightRequest="80"
                WidthRequest="80"
                Margin="15,0"
                HorizontalOptions="Start"
                VerticalOptions="Center"
                Clicked="OnBackClicked"/>
        </Grid>

        <!-- contenu -->
        <Grid Grid.Row="1">
            <BoxView Color="Black" />
            <Image Source="bggk1.jfif" Aspect="AspectFill" Opacity="0.7"/>

            <StackLayout Padding="20" Spacing="20">

                <!-- Titre -->
                <Label Text="{Binding Title}"
                       FontSize="20"
                       FontAttributes="Bold"
                       HorizontalOptions="Center"
                       TextColor="#FFD700"
                       FontFamily="OrbitronBold"
                       HorizontalTextAlignment="Center">
                    <Label.Shadow>
                        <Shadow Brush="#000000" Opacity="0.9" Offset="3,3" Radius="6"/>
                    </Label.Shadow>
                </Label>

                <!-- Progress bar fantasy -->
                <Grid HeightRequest="48"
                      WidthRequest="300"
                      HorizontalOptions="Center">

                    <!-- Viewport = zone visible -->
                    <Grid x:Name="ProgressViewport"
                          Margin="52,0,0,0"
                          WidthRequest="250"
                          HeightRequest="23"
                          IsClippedToBounds="True"
                          HorizontalOptions="Start"
                          AnchorX="0">

                        <!-- Bande animée -->
                        <Grid x:Name="FillBand"
                              WidthRequest="750"
                              HeightRequest="23">

                            <Image Source="progress_fill.png"
                                   WidthRequest="250"
                                   HeightRequest="23"
                                   Aspect="AspectFit"/>

                            <Image Source="progress_fill.png"
                                   WidthRequest="250"
                                   HeightRequest="23"
                                   Aspect="AspectFit"
                                   TranslationX="250"/>

                            <Image Source="progress_fill.png"
                                   WidthRequest="250"
                                   HeightRequest="23"
                                   Aspect="AspectFit"
                                   TranslationX="500"/>
                        </Grid>

                    </Grid>

                    <!-- Cadre -->
                    <Image Source="progress_empty.png"
                           Aspect="Fill"/>
                </Grid>

                <!-- Carte -->
                <Grid>
                    <Grid.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnCardTapped"/>
                    </Grid.GestureRecognizers>

                    <Grid x:Name="CardContainer"
                          WidthRequest="300"
                          HeightRequest="450"
                          HorizontalOptions="Center"
                          VerticalOptions="Center">

                        <Image Source="card.png" Aspect="AspectFit"/>

                        <Label x:Name="CardText"
                               Text=""
                               TextColor="#FFD700"
                               FontSize="16"
                               FontAttributes="Bold"
                               HorizontalTextAlignment="Center"
                               VerticalTextAlignment="Center"
                               Margin="45,0,45,0"/>
                    </Grid>
                </Grid>

                <Button Text="Réussi"
                        Clicked="OnSuccessClicked"
                        BackgroundColor="#004400"
                        TextColor="#FFD700"
                        FontSize="20"
                        HeightRequest="60"
                        CornerRadius="8"
                        BorderColor="#FFD700"
                        BorderWidth="2"
                        HorizontalOptions="Center"
                        Margin="0,10,0,0"/>

            </StackLayout>
        </Grid>
    </Grid>
</ContentPage>
